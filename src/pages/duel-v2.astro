---
import SiteLayout from '@/layouts/SiteLayout.astro';
import Seo from '@/components/Seo.astro';
import DuelContainerV2 from '@/components/DuelContainerV2';
import { getLangCookie, resolveLang, setLangCookie, tServer } from '@/i18n';
import type { Lang } from '@/i18n';

const existingCookie = getLangCookie(Astro);
const lang: Lang = resolveLang({ url: Astro.url, req: Astro.request, cookie: existingCookie ?? undefined });
if (existingCookie !== lang) {
  setLangCookie(Astro, lang);
}

const pageTitle = tServer(lang, 'duel.pageTitle');
const heading = tServer(lang, 'duel.heading');
const subtitle = tServer(lang, 'duel.subtitle');
---
<SiteLayout title={pageTitle}>
  <Seo slot="head" title={pageTitle} description={subtitle} />
  <h1 class="text-2xl font-bold mb-4">{heading}</h1>
  <p class="text-sm text-gray-600 mb-6">{subtitle}</p>
  <DuelContainerV2 client:load lang={lang} />
</SiteLayout>
