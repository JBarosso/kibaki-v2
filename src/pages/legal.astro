---
import SiteLayout from '@/layouts/SiteLayout.astro';
import Seo from '@/components/Seo.astro';
import { getLangCookie, resolveLang, setLangCookie, tServer } from '@/i18n';
import type { Lang } from '@/i18n';

const YEAR = new Date().getFullYear();
const existingCookie = getLangCookie(Astro);
const lang: Lang = resolveLang({ url: Astro.url, req: Astro.request, cookie: existingCookie ?? undefined });
if (existingCookie !== lang) {
  setLangCookie(Astro, lang);
}

const pageTitle = tServer(lang, 'legal.legalTitle');
const headings = {
  h1: tServer(lang, 'legal.legalHeading'),
  editor: tServer(lang, 'legal.editorHeading'),
  host: tServer(lang, 'legal.hostHeading'),
  disclaimer: tServer(lang, 'legal.disclaimerHeading'),
  intellectual: tServer(lang, 'legal.intellectualHeading'),
  liability: tServer(lang, 'legal.liabilityHeading'),
};
---
<SiteLayout title={pageTitle}>
  <Seo slot="head" title={pageTitle} description="Mentions légales de Kibaki" />
  <section class="legal-page">
    <h1 class="legal-page__title">{headings.h1}</h1>
    <p class="legal-page__subtitle"><strong>Kibaki</strong> — "Who Beats Who?"</p>

    <section class="legal-page__section">
      <h2 class="legal-page__heading">{headings.editor}</h2>
      <p><strong>Propriétaire :</strong> Jordan BAROSSO</p>
      <p><strong>Adresse :</strong> [non publiée – hébergée chez Vercel, informations disponibles sur demande des autorités]</p>
      <p><strong>Contact :</strong> <a class="legal-page__link" href="mailto:barossojordan@gmail.com">barossojordan@gmail.com</a></p>
    </section>

    <section class="legal-page__section">
      <h2 class="legal-page__heading">{headings.host}</h2>
      <p><strong>Nom :</strong> Vercel Inc.</p>
      <p><strong>Adresse :</strong> 340 S Lemon Ave #4133, Walnut, CA 91789, United States</p>
    </section>

    <section class="legal-page__section">
      <h2 class="legal-page__heading">{headings.disclaimer}</h2>
      <p><strong>Tous les personnages présents sur Kibaki appartiennent au domaine public.</strong></p>
      <p>Les informations sont fournies à titre indicatif. L'éditeur ne saurait être tenu responsable des erreurs, omissions ou indisponibilités du service.</p>
    </section>

    <section class="legal-page__section">
      <h2 class="legal-page__heading">{headings.intellectual}</h2>
      <p>Le code, le design et les éléments non-PD de Kibaki sont la propriété de Jordan BAROSSO, sauf mention contraire.</p>
    </section>

    <section class="legal-page__section">
      <h2 class="legal-page__heading">{headings.liability}</h2>
      <p>Kibaki est fourni "en l'état". L'éditeur décline toute responsabilité pour tout dommage direct ou indirect résultant de l'utilisation du site.</p>
    </section>

    <p class="legal-page__footer">© {YEAR} Jordan BAROSSO — Tous droits réservés.</p>
  </section>
</SiteLayout>
