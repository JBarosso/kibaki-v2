---
import SiteLayout from '../../layouts/SiteLayout.astro'
import TournamentsListIsland from '../../components/TournamentsListIsland'
import { getLangCookie, resolveLang, setLangCookie, tServer } from '@/i18n'
import type { Lang } from '@/i18n'

const existingCookie = getLangCookie(Astro)
const lang: Lang = resolveLang({ url: Astro.url, req: Astro.request, cookie: existingCookie ?? undefined })
if (existingCookie !== lang) {
  setLangCookie(Astro, lang)
}

const pageTitle = tServer(lang, 'tournaments.pageTitle')
const heading = tServer(lang, 'tournaments.heading')
---
<SiteLayout title={pageTitle}>
  <section class="tournaments-page">
    <div class="tournaments-page__container">
      <h1 class="tournaments-page__heading">{heading}</h1>
      <TournamentsListIsland client:only="react" lang={lang} />
    </div>
  </section>
</SiteLayout>
