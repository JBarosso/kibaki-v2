---
import SiteLayout from '../../layouts/SiteLayout.astro'
import TournamentsListIsland from '../../components/TournamentsListIsland'
import { getLangCookie, resolveLang, setLangCookie, tServer } from '@/i18n'
import type { Lang } from '@/i18n'

const existingCookie = getLangCookie(Astro)
const lang: Lang = resolveLang({ url: Astro.url, req: Astro.request, cookie: existingCookie ?? undefined })
if (existingCookie !== lang) {
  setLangCookie(Astro, lang)
}

const pageTitle = tServer(lang, 'tournaments.pageTitle')
const heading = tServer(lang, 'tournaments.heading')
---
<SiteLayout title={pageTitle}>
  <section class="tournaments-page">
    <div class="tournaments-page__container">
      <h1 class="tournaments-page__heading">{heading}</h1>
      <TournamentsListIsland client:only="react" lang={lang} />
    </div>
  </section>
</SiteLayout>

<style>
.tournaments-page {
  width: 100%;
  padding: var(--spacing-2) 0;

  &__container {
    max-width: var(--container-max-width);
    margin: 0 auto;
    padding: var(--container-padding);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-2);
  }

  &__heading {
    font-size: var(--fs-6);
    font-family: var(--family-primary);
    font-weight: 700;
    color: var(--neutral-light);
    letter-spacing: 0.02em;
  }
}
</style>
