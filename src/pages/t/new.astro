---
import SiteLayout from '../../layouts/SiteLayout.astro'
import TournamentNewIsland from '../../components/TournamentNewIsland'
import { getLangCookie, resolveLang, setLangCookie, tServer } from '@/i18n'
import type { Lang } from '@/i18n'

const existingCookie = getLangCookie(Astro)
const lang: Lang = resolveLang({ url: Astro.url, req: Astro.request, cookie: existingCookie ?? undefined })
if (existingCookie !== lang) {
  setLangCookie(Astro, lang)
}

const pageTitle = tServer(lang, 'tournaments.createPageTitle')
const heading = tServer(lang, 'tournaments.createHeading')
---

<SiteLayout title={pageTitle}>
  <section class="tournament-new-page">
    <div class="tournament-new-page__container">
      <div class="tournament-new-page__header">
        <a href="/t" class="tournament-new-page__back">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          <span>{tServer(lang, 'tournaments.backToList')}</span>
        </a>
        <h1 class="tournament-new-page__heading">{heading}</h1>
      </div>
      <TournamentNewIsland client:only="react" lang={lang} />
    </div>
  </section>
</SiteLayout>
