---
import SiteLayout from '@/layouts/SiteLayout.astro';
import Seo from '@/components/Seo.astro';
import DuelContainer from '@/components/DuelContainer';
import { getLangCookie, resolveLang, setLangCookie, tServer } from '@/i18n';
import type { Lang } from '@/i18n';

const existingCookie = getLangCookie(Astro);
const lang: Lang = resolveLang({ url: Astro.url, req: Astro.request, cookie: existingCookie ?? undefined });
if (existingCookie !== lang) {
  setLangCookie(Astro, lang);
}

const pageTitle = tServer(lang, 'duel.pageTitle');
const heading = tServer(lang, 'duel.heading');
const subtitle = tServer(lang, 'duel.subtitle');
---
<SiteLayout title={pageTitle}>
  <Seo slot="head" title={pageTitle} description={subtitle} />
  <div class="duel-page__container">
    <div class="duel-page__header">
      <h1>{heading}</h1>
      <p>{subtitle}</p>
    </div>
    <DuelContainer client:load lang={lang} />
  </div>
</SiteLayout>
